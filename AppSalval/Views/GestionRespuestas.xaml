<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AppSalval.Views.GestionRespuestas"
             Title="GestionRespuestas">
    <VerticalStackLayout>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Botón para desplegar opciones -->
            <Button Text="Opciones"
                    Grid.Row="0"
                    Grid.Column="0"
                    HorizontalOptions="Start"
                    VerticalOptions="Start"
                     FontSize="Medium"
                    Margin="20,10,0,0">
                <!--Clicked="OnOpcionesClicked"-->
            </Button>

            <Label Text="Administrador" 
                   Grid.Row="0"
                   Grid.Column="0"
                   FontSize="Title"
                   HorizontalOptions="Center"
                   VerticalOptions="Start"
                   TextColor="MidnightBlue"
                   Margin="30,20,0,0"/>

            <!-- Contenido principal de la página -->
            <ContentView Grid.Row="1" Grid.ColumnSpan="2" VerticalOptions="Center">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Label Text="Gestión de Respuestas"
                           FontSize="Medium"
                           TextColor="MidnightBlue"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"
                           Margin="30,20,0,0"
                           Grid.Column="0" />

                    <Button Text="Añadir"
                            FontSize="Medium"
                            TextColor="White"
                            BackgroundColor="#1edb68"
                            HorizontalOptions="End"
                            VerticalOptions="Center"
                            Margin="0,20,30,0"
                            Grid.Column="1" />
                </Grid>
            </ContentView>

            <!-- Tabla de registros -->
            <Grid Grid.Row="2" Grid.ColumnSpan="2" Margin="10">
                <!-- Encabezados de la tabla -->
                <Grid RowDefinitions="Auto" ColumnDefinitions="*,*,*,*,Auto" Margin="0,10,0,0">
                    <Label Text="id" 
                           Grid.Column="0" 
                           FontAttributes="Bold" 
                           FontSize="Small" 
                           TextColor="MidnightBlue" 
                           HorizontalOptions="Center" 
                           VerticalOptions="Center" 
                           Padding="5" />

                    <Label Text="Fecha de Registro" 
                           Grid.Column="1" 
                           FontAttributes="Bold" 
                           FontSize="Small" 
                           TextColor="MidnightBlue" 
                           HorizontalOptions="Center" 
                           VerticalOptions="Center" 
                           Padding="5" />

                    <Label Text="Encuestador Encargado" 
                           Grid.Column="2" 
                           FontAttributes="Bold" 
                           FontSize="Small" 
                           TextColor="MidnightBlue" 
                           HorizontalOptions="Center" 
                           VerticalOptions="Center" 
                           Padding="5" />

                    <Label Text="id Formulario" 
                           Grid.Column="3" 
                           FontAttributes="Bold" 
                           FontSize="Small" 
                           TextColor="MidnightBlue" 
                           HorizontalOptions="Center" 
                           VerticalOptions="Center" 
                           Padding="5" />

                    <Label Text="Acciones" 
                           Grid.Column="4" 
                           FontAttributes="Bold" 
                           FontSize="Small" 
                           TextColor="MidnightBlue" 
                           HorizontalOptions="Center" 
                           VerticalOptions="Center" 
                           Padding="5" />
                </Grid>

                <!-- Lista de elementos -->
                <CollectionView Grid.Row="1" ItemsSource="{Binding Registros}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BorderColor="LightGray" CornerRadius="0" Padding="5" Margin="0,0,0,0">
                                <Grid ColumnDefinitions="*,*,*,*,Auto,Auto,Auto">
                                    <!-- id -->
                                    <Label Text="{Binding Id}" Grid.Column="0" HorizontalOptions="Center" VerticalOptions="Center" TextColor="MidnightBlue" FontSize="Small" />

                                    <!-- Fecha de Registro -->
                                    <Label Text="{Binding FechaRegistro}" Grid.Column="1" HorizontalOptions="Center" VerticalOptions="Center" TextColor="MidnightBlue" FontSize="Small" />

                                    <!-- Encuestador Encargado -->
                                    <Label Text="{Binding Encuestador}" Grid.Column="2" HorizontalOptions="Center" VerticalOptions="Center" TextColor="MidnightBlue" FontSize="Small" />

                                    <!-- id Formulario -->
                                    <Label Text="{Binding IdFormulario}" Grid.Column="3" HorizontalOptions="Center" VerticalOptions="Center" TextColor="MidnightBlue" FontSize="Small" />

                                    <!-- Botón para Ver Respuestas -->
                                    <Button Text="Ver" 
                                            Command="{Binding VerCommand}" 
                                            BackgroundColor="#1edb68" TextColor="White"
                                            WidthRequest="60" HeightRequest="25" 
                                            FontSize="Small"
                                            Grid.Column="4" HorizontalOptions="Center" />

                                    <!-- Botón para Editar -->
                                    <Button Text="Editar" 
                                            Command="{Binding EditarCommand}" 
                                            BackgroundColor="#FFA500" TextColor="White"
                                            WidthRequest="60" HeightRequest="25" 
                                            FontSize="Small"
                                            Grid.Column="5" HorizontalOptions="Center" />

                                    <!-- Botón para Borrar -->
                                    <Button Text="Borrar" 
                                            Command="{Binding BorrarCommand}" 
                                            BackgroundColor="#FF4500" TextColor="White"
                                            WidthRequest="60" HeightRequest="25" 
                                            FontSize="Small"
                                            Grid.Column="6" HorizontalOptions="Center" />
                                </Grid>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>
        </Grid>
    </VerticalStackLayout>
</ContentPage>