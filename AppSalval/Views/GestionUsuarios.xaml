<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AppSalval.Views.GestionUsuarios"
             Title="Gestión de Usuarios">
    
    <ScrollView>
        <!-- Hacemos que todo el contenido sea desplazable -->
        <VerticalStackLayout Padding="20">

            <Grid Padding="0,0,0,10" RowDefinitions="Auto" ColumnDefinitions="Auto, *, Auto">
                <!-- Botón Agregar alineado a la izquierda -->
                <Button Text="Agregar +" Clicked="OnAddUserClicked"
                        BackgroundColor="Green" TextColor="White" 
                        Padding="5" CornerRadius="8" 
                        HorizontalOptions="Start" Grid.Column="0"/>

                <Grid HorizontalOptions="FillAndExpand" Grid.Column="1"/>
                
                <!-- Botón Regresar alineado a la derecha -->
                <Button Text="← Regresar" Clicked="OnBackClicked"
                        BackgroundColor="Gray" TextColor="White" 
                        Padding="5" CornerRadius="8" 
                        HorizontalOptions="End" Grid.Column="2"/>
            </Grid>


            <!-- Encabezados -->
            <Frame BackgroundColor="#F0F0F0" Padding="10" HasShadow="False" BorderColor="Gray" CornerRadius="10">
                <Grid ColumnDefinitions="1.2*, 3*, 1.2*, 1.8*">
                    <Label Text="ID Usuario" FontAttributes="Bold" FontSize="16" TextColor="Black" Grid.Column="0"/>
                    <Label Text="Correo" FontAttributes="Bold" FontSize="16" TextColor="Black" Grid.Column="1"/>
                    <Label Text="Rol" FontAttributes="Bold" FontSize="16" TextColor="Black" Grid.Column="2"/>
                    <Label Text="Acciones" FontAttributes="Bold" FontSize="16" TextColor="Black" Grid.Column="3"/>
                </Grid>
            </Frame>

            <!-- Lista de Usuarios -->
            <CollectionView ItemsSource="{Binding Usuarios}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid ColumnDefinitions="1.2*, 3*, 1.2*, 1.8*" Padding="8">
                            <Label Text="{Binding IdUsuario}" FontSize="14" TextColor="Black" Grid.Column="0"/>
                            <Label Text="{Binding Correo}" FontSize="14" TextColor="Black" Grid.Column="1"/>
                            <Label Text="{Binding RoleName}" FontSize="14" TextColor="Black" Grid.Column="2"/>

                            <!-- Botones más pequeños -->
                            <HorizontalStackLayout Grid.Column="3" Spacing="5">
                                <Button Text="✏️" Clicked="OnEditUserClicked"
                                        BackgroundColor="Blue" TextColor="White" 
                                        Padding="2" CornerRadius="5" WidthRequest="50" HeightRequest="30"/>

                                <Button Text="🗑️"  Clicked="OnDeleteUserClicked"
                                        BackgroundColor="Red" TextColor="White" 
                                        Padding="2" CornerRadius="5" WidthRequest="50" HeightRequest="30"/>
                            </HorizontalStackLayout>
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
    </ScrollView>
    <!-- Fin del ScrollView -->

</ContentPage>

